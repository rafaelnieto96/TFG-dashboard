{% extends "layout.html.twig" %}

{% block title %}Dashboard Admin
{% endblock %}

{% block bodyContent %}

	<!-- Start List Table -->
	<div class="main-table">
		<div class="table">
			<h2 class="mb-4">List of Events</h2>
			<!-- Start Search Box -->
			<div class="row justify-content-center mb-3">
				<div class="col-md-4">
					<div class="input-group mb-3">
						<input type="text" class="form-control input-text" id="search-input" placeholder="Search by name or description..." aria-label="Recipient's username" aria-describedby="basic-addon2">
						<div class="input-group-append">
							<button class="btn btn-md btn-outline-warning" type="button">
								<i class="fa fa-search"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="col-md-8">
					<a href="{{ path('homepage_new') }}" class="btn btn-outline-warning float-right mr-4">Create Event</a>
				</div>
			</div>
			<!-- End Search Box -->
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Description</th>
						<th>Points</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for item in events %}
						<tr>
							<td>{{ item.name }}</td>
							<td>{{ item.description }}</td>
							<td>{{ item.points }}</td>
							<td class="primary">
								<details class="dropdown">
									<summary role="button">
										<i class="fa fa-2x fa-cog"></i>
									</summary>
									<ul>
										<li><a href="{{ path('homepage_edit', {'id': item.id}) }}">Edit</a></li>
										<li><a href="{{ path('homepage_delete', {'id': item.id}) }}">Delete</a></li>
									</ul>
								</details>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{# <a href="#">Show all</a> #}
		<!-- End List Table -->
	</div>

	<script>
		const searchInput = document.querySelector('#search-input');

		searchInput.addEventListener('input', () => {
		const searchTerm = searchInput.value.trim().toLowerCase();
		const rows = document.querySelectorAll('tbody tr');

		rows.forEach((row) => {
			const name = row.querySelector('td:first-child').textContent.trim().toLowerCase();
			const description = row.querySelector('td:nth-child(2)').textContent.trim().toLowerCase();

			if (name.includes(searchTerm) || description.includes(searchTerm)) {
			row.style.display = '';
			} else {
			row.style.display = 'none';
			}
		});
		});
	</script>

{% endblock %}
